<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>월별 통계</title>
  <!-- Pretendard 웹폰트 CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light p-5">

<div class="container">
  <h2 class="mb-4">📊 {{ year }}년 {{ month }}월 버스 조회 통계</h2>

  <!-- 월 선택 폼 -->
  <form method="get" class="row g-2 mb-4">
    <div class="col-md-3">
      <input type="number" name="year" class="form-control bg-secondary text-light border-0" value="{{ year }}">
    </div>
    <div class="col-md-3">
      <input type="number" name="month" class="form-control bg-secondary text-light border-0" value="{{ month }}">
    </div>
    <div class="col-md-3">
      <button type="submit" class="btn btn-outline-info w-100">통계 보기</button>
    </div>
  </form>

  <!-- 차트 출력 -->
  <canvas id="statsChart" height="100"></canvas>
</div>

<script>
const ctx = document.getElementById('statsChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: {{ labels|safe }},
      datasets: [{
          label: '조회 횟수',
          data: {{ values|safe }},
          backgroundColor: 'rgba(54, 162, 235, 0.7)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        }]
    },
    options: {
        scales: {
            x: { ticks: { color: "#fff" } },
            y: { beginAtZero: true, ticks: { color: "#fff" } }
        },
        plugins: {
            legend: { labels: { color: "#fff" } }
        }
    }
});
</script>

</body>
</html>
